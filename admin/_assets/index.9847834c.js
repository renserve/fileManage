import{a1 as e,c as a,t,aZ as n,bt as r,cu as s,i as o,a as u,r as m,o as i,b as c,b8 as l,aA as g,a9 as f,aa as p,e as d,bc as h,a2 as b,Q as S,bd as F,cX as P,cY as v}from"./index.c36a6c67.js";import{a as T,u as A,b as R}from"./useRootSetting.d41719c3.js";import{a as j}from"./useWindowSizeFn.49839837.js";import"./domUtils.a209b89e.js";import w from"./index.98907d87.js";function x(){const{currentRoute:u}=e(),{getShowMultipleTab:m}=T(),i=a((()=>l(t(n.getRoutes()))||[])),c=a((()=>r.getTabsState.reduce(((e,a)=>(a.meta&&Reflect.has(a.meta,"frameSrc")&&e.push(a.path),e)),[])));function l(e){let a=[];for(const t of e){const{meta:{frameSrc:e}={},children:n}=t;e&&a.push(t),n&&n.length&&a.push(...l(n))}return a=s(a,"name"),a}return{hasRenderFrame:function(e){return!o(m)||o(c).includes(e)},getFramePages:i,showIframe:function(e){return e.path===o(u).path},getAllFramePages:l}}var y=u({name:"FrameLayout",components:{FramePage:w},setup:()=>({...x()})});y.render=function(e,a,t,n,r,s){const o=m("FramePage");return i(!0),c(g,null,l(e.getFramePages,(a=>(i(),c(g,{key:a.path},[a.meta.frameSrc&&e.hasRenderFrame(a.path)?f((i(),c(o,{key:0,frameSrc:a.meta.frameSrc},null,8,["frameSrc"])),[[p,e.showIframe(a)]]):d("",!0)],64)))),128)};var E=u({name:"PageLayout",setup(){const{getShowMenu:e}=A(),{getOpenKeepAlive:t,getCanEmbedIFramePage:n}=R(),{getBasicTransition:s,getEnableTransition:u}=h(),{getMax:m}=T(),i=function(){function e(){const{getOpenPageLoading:e,getEnableTransition:a}=h();e.value&&a.value&&b.setPageLoadingAction(!1)}return j((()=>{e(),stop()})),{onAfterEnter:e}}(),c=a((()=>o(t)&&o(e))),l=a((()=>r.getKeepAliveTabsState));return()=>S("div",null,S(F,null,{default:({Component:e,route:a})=>{const t=o(l),n=t.includes(a.name)&&a.meta.inTab?"fade-slide":null,r=()=>S(e,{key:a.fullPath}),g=o(c)?S(P,{max:o(m),include:t},r()):r();return o(u)?S(v,{...i,name:n||a.meta.transitionName||o(s),mode:"out-in",appear:!0},(()=>g)):g}}),o(n)&&S(y,null))}});export default E;
