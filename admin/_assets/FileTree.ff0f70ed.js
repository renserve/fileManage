let e=document.createElement("style");e.innerHTML=".fileWrapper[data-v-5cb7a180]{display:-webkit-box;display:-ms-flexbox;display:flex}.fileWrapper .left .ant-card[data-v-5cb7a180]{max-width:270px}.fileWrapper .left .treeGroup[data-v-5cb7a180]{width:100%}.fileWrapper .left[data-v-5cb7a180] span.ant-tree-title{width:80px;overflow:hidden;direction:rtl;text-overflow:ellipsis;white-space:nowrap;display:inline-block}.fileWrapper .right[data-v-5cb7a180]{-webkit-box-flex:1;-ms-flex:1;flex:1}",document.head.appendChild(e);import{d2 as t,d3 as a,ck as r,cG as l,cO as s,d4 as i,cF as n,ch as d,a as o,g as c,af as f,k as p,p as u,l as h,r as m,o as y,b,n as v,f as D,e as _,s as w,v as g}from"./index.953c91ca.js";import{b as x}from"./_baseDifference.038757f8.js";function K(){var e=arguments.length;if(!e)return[];for(var s=Array(e-1),i=arguments[0],n=e;n--;)s[n-1]=arguments[n];return t(r(i)?l(i):[i],a(s,1))}var k=s((function(e,t){var r=i(t);return n(r)&&(r=void 0),n(e)?x(e,a(t,1,n,!0),d(r)):[]}));function S(e,t,a=[]){e.map((e=>{t.map(((r,l)=>{r.parent_id===e.id&&(e.children.push(r),a.push(r)),l!==t.length-1||e.children&&e.children.length||delete e.children}))}));const r=e.filter((e=>e.children));return r&&r[0]&&S(t,k(t,a,"id"),a),e}function T(e,t,a=[]){let r,l;return t.some(((t,s)=>{const i=String(t.id);if(i===e)return r=String(t.parent_id),l=t.parent_id,a.push(i),!0})),Number(l)&&T(r,t,a),a}const{createInfoModal:W,createWarningModal:A}=p();var C=o({name:"FileTree",props:["treeData","leafData"],setup(e){const t=c(null),a=c(null),r=c([]);return f((()=>{const l=e.treeData&&e.treeData.map((e=>(e.children=[],e.key=String(e.id),e)))||[];if(l.length&&e.leafData){const s=l.filter((e=>!e.parent_id)),i=l.filter((e=>e.parent_id));t.value=S(s,K(i,e.leafData));let n=r.value[0];if(n){n=/file/.test(n)?e.leafData.find((e=>e.key===n)).parent_id:n;const t=n&&l.find((e=>String(e.id)===String(n)));a.value=t?T(String(n),l):[String(n)]}else a.value=l.map((e=>String(e.id)))}else t.value=[]})),{loadTreeData:t,expandedKeys:a,selectKey:r}},methods:{fakeLoadData(){return()=>Promise.resolve(this.loadTreeData)},rowAdd(e){if(e){const e=Number(this.selectKey[0]),t=this.treeData.find((t=>t.id===e)).id;this.$emit("rowAdd",{parent_id:t})}else this.selectKey=[],this.$emit("rowAdd")},rowDelete(){const e=Number(this.selectKey[0]);e?this.$emit("rowDelete",e):this.selectKey[0]?A({content:"当前选择是文件而不是分类,请选择分类"}):W({content:"请选择分类"})},rowEdit(){const e=Number(this.selectKey[0]);e?this.$emit("rowEdit",this.treeData.find((t=>t.id===e))):this.selectKey[0]?A({content:"当前选择是文件而不是分类,请选择分类"}):W({content:"请选择分类"})},onSelect(e){let t=e[0],a={id:Number(t)};/file/.test(t)&&(a=this.leafData.find((e=>e.key===t))),this.selectKey=e,this.$emit("currentClass",a)}}});const $=w("data-v-5cb7a180");u("data-v-5cb7a180");const z={class:"fileWrapper"},N={class:"left"},E=g("新增"),F=g("添加"),M=g("编辑"),j=g("删除"),G={class:"right"};h();const L=$(((e,t,a,r,l,s)=>{const i=m("a-button"),n=m("a-directory-tree"),d=m("a-card");return y(),b("div",z,[v("div",N,[v(d,null,{title:$((()=>[v(i,{size:"small",class:"mr_btn",type:"primary",onClick:t[1]||(t[1]=t=>e.rowAdd())},{default:$((()=>[E])),_:1}),v(i,{size:"small",class:"mr_btn",type:"primary",onClick:t[2]||(t[2]=t=>e.rowAdd(!0))},{default:$((()=>[F])),_:1}),v(i,{size:"small",class:"mr_btn",type:"primary",onClick:t[3]||(t[3]=t=>e.rowEdit())},{default:$((()=>[M])),_:1}),v(i,{size:"small",type:"danger",onClick:t[4]||(t[4]=t=>e.rowDelete())},{default:$((()=>[j])),_:1})])),default:$((()=>[v(n,{treeData:e.loadTreeData,class:"treeGroup",ref:"directoryTree",replaceFields:{children:"children",title:"name"},loadData:e.fakeLoadData(),loadedKeys:e.expandedKeys,selectedKeys:e.selectKey,expandedKeys:e.expandedKeys,onSelect:e.onSelect},null,8,["treeData","loadData","loadedKeys","selectedKeys","expandedKeys","onSelect"])])),_:1})]),v("div",G,[e.leafData?D(e.$slots,"default",{key:0}):_("",!0)])])}));C.render=L,C.__scopeId="data-v-5cb7a180";var I=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:C});export{I as F,K as c,C as s};
