import{a as e,g as t,c as s,i as n,Q as a,b1 as o,bf as i,cq as r,bh as l,bi as c,U as d,r as u,o as p,b as f,w as m,n as b,m as x}from"./index.953c91ca.js";import{g,w as h,a as j}from"./index.3e014b8e.js";import"./index.37d2e916.js";import{C as v}from"./index.1e43c4ad.js";import{D}from"./index.6f4a206c.js";import{p as y}from"./index.4a206340.js";import"./useWindowSizeFn.b1b31d66.js";import"./domUtils.a209b89e.js";import{getDescSchema as w}from"./data.b0fb5d1d.js";var M={useCollapse:y.bool.def(!0),title:y.string.def(""),size:y.oneOf(["small","default","middle",void 0]).def("small"),bordered:y.bool.def(!0),column:{type:[Number,Object],default:()=>({xxl:4,xl:3,lg:3,md:3,sm:2,xs:1})},collapseOptions:{type:Object,default:null},schema:{type:Array,default:()=>[]},data:y.object};var O=e({name:"Description",props:M,emits:["register"],setup(e,{attrs:l,slots:c,emit:d}){const u=t(null),p=s((()=>({...e,...n(u)}))),f=s((()=>({...n(p),title:void 0}))),m=s((()=>!!n(p).title)),b=s((()=>({canExpand:!1,...n(f).collapseOptions}))),x=s((()=>({...l,...n(f)})));function h({label:e,labelMinWidth:t,labelStyle:s}){if(!s&&!t)return e;const n={...s,minWidth:`${t}px `};return a("div",{style:n},e)}const j=()=>a(D,{class:"description",...n(x)},(()=>function(){const{schema:e}=n(f);return n(e).map((e=>{const{render:t,field:s,span:i,show:r,contentMinWidth:l}=e,{data:c}=n(f);if(r&&o(r)&&!r(c))return null;const d=()=>o(t)?t(null==c?void 0:c[s],c):n(c)&&n(c)[s],u=l;return a(D.Item,{label:h(e),key:s,span:i},(()=>l?a("div",{style:{minWidth:`${u}px`}},d()):d()))}))}()));return d("register",{setDescProps:function(e){const t=i(n(u)||{},e);u.value=r(t)}}),()=>n(m)?(()=>{const t=e.useCollapse?j():a("div",null,j());if(!e.useCollapse)return t;const{canExpand:s,helpMessage:o}=n(b),{title:i}=n(p);return a(v,{title:i,canExpan:s,helpMessage:o},{default:()=>t,action:()=>g(c,"action")})})():j()}});var E=e({name:"ErrorLogDetailModal",components:{BasicModal:j,Description:h(O)},props:{info:{type:Object,default:null}},setup(){const{t:e}=d("sys.errorLog"),[s]=function(e){if(!l())throw new Error("Please put useDescription function in the setup function!");const s=t(null),a=t(!1);return[function(t){n(a)&&c()||(s.value=t,e&&t.setDescProps(e),a.value=!0)},{setDescProps:e=>{n(s).setDescProps(e)}}]}({column:2,schema:w()});return{register:s,useI18n:d,t:e}}});E.render=function(e,t,s,n,a,o){const i=u("Description"),r=u("BasicModal");return p(),f(r,x({width:800,title:e.t("tableActionDesc")},e.$attrs),{default:m((()=>[b(i,{data:e.info,onRegister:e.register},null,8,["data","onRegister"])])),_:1},16,["title"])};export default E;
