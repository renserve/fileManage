import{a as e,g as t,c as s,i as a,Q as n,b1 as o,bf as i,cr as r,bh as l,bi as c,U as d,r as u,o as p,b as f,w as m,n as b,m as x}from"./index.c36a6c67.js";import{g,w as h,a as j}from"./index.1878d1f8.js";import"./index.c6464e5c.js";import{C as v}from"./index.078abd6c.js";import{D}from"./index.f5cfacef.js";import{p as y}from"./index.da4720b1.js";import"./useWindowSizeFn.49839837.js";import"./domUtils.a209b89e.js";import{getDescSchema as w}from"./data.75cfae9a.js";var M={useCollapse:y.bool.def(!0),title:y.string.def(""),size:y.oneOf(["small","default","middle",void 0]).def("small"),bordered:y.bool.def(!0),column:{type:[Number,Object],default:()=>({xxl:4,xl:3,lg:3,md:3,sm:2,xs:1})},collapseOptions:{type:Object,default:null},schema:{type:Array,default:()=>[]},data:y.object};var O=e({name:"Description",props:M,emits:["register"],setup(e,{attrs:l,slots:c,emit:d}){const u=t(null),p=s((()=>({...e,...a(u)}))),f=s((()=>({...a(p),title:void 0}))),m=s((()=>!!a(p).title)),b=s((()=>({canExpand:!1,...a(f).collapseOptions}))),x=s((()=>({...l,...a(f)})));function h({label:e,labelMinWidth:t,labelStyle:s}){if(!s&&!t)return e;const a={...s,minWidth:`${t}px `};return n("div",{style:a},e)}const j=()=>n(D,{class:"description",...a(x)},(()=>function(){const{schema:e}=a(f);return a(e).map((e=>{const{render:t,field:s,span:i,show:r,contentMinWidth:l}=e,{data:c}=a(f);if(r&&o(r)&&!r(c))return null;const d=()=>o(t)?t(null==c?void 0:c[s],c):a(c)&&a(c)[s],u=l;return n(D.Item,{label:h(e),key:s,span:i},(()=>l?n("div",{style:{minWidth:`${u}px`}},d()):d()))}))}()));return d("register",{setDescProps:function(e){const t=i(a(u)||{},e);u.value=r(t)}}),()=>a(m)?(()=>{const t=e.useCollapse?j():n("div",null,j());if(!e.useCollapse)return t;const{canExpand:s,helpMessage:o}=a(b),{title:i}=a(p);return n(v,{title:i,canExpan:s,helpMessage:o},{default:()=>t,action:()=>g(c,"action")})})():j()}});var E=e({name:"ErrorLogDetailModal",components:{BasicModal:j,Description:h(O)},props:{info:{type:Object,default:null}},setup(){const{t:e}=d("sys.errorLog"),[s]=function(e){if(!l())throw new Error("Please put useDescription function in the setup function!");const s=t(null),n=t(!1);return[function(t){a(n)&&c()||(s.value=t,e&&t.setDescProps(e),n.value=!0)},{setDescProps:e=>{a(s).setDescProps(e)}}]}({column:2,schema:w()});return{register:s,useI18n:d,t:e}}});E.render=function(e,t,s,a,n,o){const i=u("Description"),r=u("BasicModal");return p(),f(r,x({width:800,title:e.t("tableActionDesc")},e.$attrs),{default:m((()=>[b(i,{data:e.info,onRegister:e.register},null,8,["data","onRegister"])])),_:1},16,["title"])};export default E;
