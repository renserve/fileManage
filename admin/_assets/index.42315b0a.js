import{cW as r,a as e,g as o,U as a,N as t,C as i,cq as s,b9 as n,r as l,o as c,b as d,aA as u,b8 as m,a9 as f,aa as p,n as b,w as g,v as j,q as E}from"./index.953c91ca.js";import"./useFullScreen.d05519b6.js";import{r as y}from"./index.26e42190.js";import{b as x}from"./index.3e014b8e.js";import"./index.37d2e916.js";import"./index.cb4776d6.js";import"./zh_CN.0242bd16.js";import"./index.1e43c4ad.js";import"./index.6f4a206c.js";import"./CheckOutlined.d43601f0.js";import{s as R,u as C}from"./useTable.3b46ad89.js";import"./upload.cf17473c.js";import"./index.4a206340.js";import"./useWindowSizeFn.b1b31d66.js";import"./domUtils.a209b89e.js";import{getColumns as h}from"./data.b0fb5d1d.js";import k from"./DetailModal.2d8d9553.js";var w;(w||(w={})).Error="/error";var T=e({name:"ErrorHandler",components:{DetailModal:k,BasicTable:R,TableAction:y},setup(){const e=o(),l=o([]),{t:c}=a("sys.errorLog"),[d,{setTableData:u}]=C({title:c("sys.errorLog.tableTitle"),columns:h(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[m,{openModal:f}]=x();return t((()=>n.getErrorInfoState),(r=>{i((()=>{u(s(r))}))}),{immediate:!0}),{register:d,registerModal:m,handleDetail:function(r){e.value=r,f(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){l.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:async function(){await r.request({url:w.Error,method:"GET"})},imgListRef:l,rowInfoRef:e,t:c}}});const A={class:"p-4"};T.render=function(r,e,o,a,t,i){const s=l("DetailModal"),n=l("a-button"),y=l("TableAction"),x=l("BasicTable");return c(),d("div",A,[(c(!0),d(u,null,m(r.imgListRef,(r=>f((c(),d("img",{key:r,src:r},null,8,["src"])),[[p,!1]]))),128)),b(s,{info:r.rowInfoRef,onRegister:r.registerModal},null,8,["info","onRegister"]),b(x,{onRegister:r.register,class:"error-handle-table"},{toolbar:g((()=>[b(n,{onClick:r.fireVueError,type:"primary"},{default:g((()=>[j(E(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),b(n,{onClick:r.fireResourceError,type:"primary"},{default:g((()=>[j(E(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),b(n,{onClick:r.fireAjaxError,type:"primary"},{default:g((()=>[j(E(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:g((({record:e})=>[b(y,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default T;
